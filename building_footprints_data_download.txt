// Define the AOI using coordinates (converted using Chatgpt from WKT string)
var aoi = ee.Geometry.Polygon([
  [[86.44251549816174, 23.80963854060812], 
    [86.44248331165356, 23.811307202931776], 
    [86.44352937316937, 23.811994292949546], 
    [86.44357765293164, 23.813142706718537], 
    [86.444722956181, 23.81309853714605], 
    [86.44557858085675, 23.81309853714601], 
    [86.44642347669644, 23.81309853714601], 
    [86.44656965708775, 23.813864140942215], 
    [86.44662732458157, 23.814296018014915], 
    [86.44505152678532, 23.814359817915214], 
    [86.44425558126015, 23.81440153321768], 
    [86.44359374618573, 23.81485303916325], 
    [86.44447619295163, 23.81689951924789], 
    [86.44328663325352, 23.817526462026365], 
    [86.44262815094037, 23.81800126794717], 
    [86.4418234882359, 23.81747125192281], 
    [86.44004786586804, 23.818030713218377], 
    [86.44024903154416, 23.81833007309667], 
    [86.44089946723027, 23.819107914798593], 
    [86.43988626277489, 23.819967952010796], 
    [86.43914362615389, 23.81894535362947], 
    [86.43883668085975, 23.818654890052482], 
    [86.43526070950968, 23.821329001394858], 
    [86.4343846748997, 23.81942958594593], 
    [86.43552286400875, 23.818773149753902], 
    [86.43648939174084, 23.818126525324278], 
    [86.43631551439823, 23.817798304348084], 
    [86.43696350099701, 23.817268579840693], 
    [86.43792262384152, 23.816704500012396], 
    [86.43854915276818, 23.816318318695185], 
    [86.4391703172768, 23.815929682417057], 
    [86.43816606312241, 23.81397795261447], 
    [86.43883069696669, 23.813633946022172], 
    [86.4386126982353, 23.813240043216148], 
    [86.43888822596266, 23.812340640943482], 
    [86.43868558068418, 23.81219329124408], 
    [86.43842064329503, 23.81182514991067], 
    [86.43786974999414, 23.812176026447], 
    [86.4376318542699, 23.811855779718602], 
    [86.43830147585815, 23.81145517441243], 
    [86.43757634875867, 23.81076009903369], 
    [86.43736944876393, 23.81033002143101], 
    [86.43778098289742, 23.81023522421517], 
    [86.4381710593588, 23.81019932103185], 
    [86.43842013489659, 23.81041216924171], 
    [86.43854141237937, 23.810417529882063], 
    [86.43853394382943, 23.810324733839998], 
    [86.43855233777883, 23.81001147184399], 
    [86.43951640116283, 23.810024161405632], 
    [86.43975435183448, 23.809985108592556], 
    [86.43999766692416, 23.810014765653385], 
    [86.4400415418592, 23.810492892845584], 
    [86.44066429414606, 23.81044362100262], 
    [86.44061088986346, 23.811034916579562], 
    [86.44067806503769, 23.809931833410083], 
    [86.44116022209533, 23.809978752628915], 
    [86.44140098034163, 23.809569241232612], 
    [86.44202261226805, 23.80962597630752], 
    [86.44251549816174, 23.80963854060812]]
]);

// Load Google Open Buildings Temporal dataset
var col = ee.ImageCollection('GOOGLE/Research/open-buildings-temporal/v1')
            .filterBounds(aoi)  // Filter to AOI
            .filterDate('2023-01-01', '2023-12-31');  // 1 years

// Get the latest image
var latestImage = col.sort('system:time_start', false).mosaic().clip(aoi);

// Select bands (Building Presence & Height)
var buildingPresence = latestImage.select('building_presence');
var buildingHeight = latestImage.select('building_height');

// Visualization
var vis = {min: 0, max: 1, palette: ['black', 'blue', 'cyan', 'yellow', 'red']};
Map.addLayer(buildingPresence, vis, 'Building Presence');
Map.addLayer(buildingHeight, {min: 0, max: 100, palette: ['black', 'gray', 'white']}, 'Building Height');
Map.centerObject(aoi, 16);

// Export as GeoTIFF (Raster)
Export.image.toDrive({
  image: latestImage,
  description: 'Google_OpenBuildings',
  region: aoi,
  scale: 4,  // Keep original resolution
  crs: 'EPSG:32645',  // Change based on your UTM zone
  fileFormat: 'GeoTIFF'
});
